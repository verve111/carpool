<!DOCTYPE html>
<html lang="ru">
<head>
<title>Ищу попутку, поиск попутного авто между городами</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Поиск попутного авто из пункта А в пункт Б. Найти водителя.">
<meta name="keywords" content="авто попутчик, попутное авто, поиск попутки, ищу попутку, carpool, подвезти на машине">
<meta name="author" content="Pipolo solutions">

<link href="assets/css/bootstrap.min.css" rel="stylesheet">
<link href="assets/css/jquery-ui-1.10.3.custom.min.css" rel="stylesheet">
<link href="assets/css/custom.css" rel="stylesheet">
<link href="assets/css/bootstrap-theme.min.css" rel="stylesheet">
<link href="assets/css/tooltipster.css" rel="stylesheet">
<link rel="shortcut icon" type="image/x-icon" href="assets/ico/favicon.ico">
  
</head>

<body>
	<div id="routeSuccesToast" class="successToast" style="display:none;"></div>

	<!-- facebook, vk -->
	<div id="poiskpageheader"></div>
	
	<!-- Green header -->
	<div class="row poputiHeader" style="margin:0px;">
		<div class="col-lg-2 col-md-1">
		</div>
		<div class="col-md-8">
			<img src="images/auto-poputchik.png" title="Авто попутчик" alt="Поиск авто попутчика" style="padding-top:8px;" width="260"></img>
		</div>
		<div class="col-md-3">
		</div>
	</div>

	<!-- navbar-fixed-top navbar-inverse-->
	<nav class="navbar-default navbar " >
		<button type="button" class="navbar-toggle" data-toggle="collapse"
			data-target=".navbar-collapse">
			<span class="icon-bar"></span> <span class="icon-bar"></span> <span
				class="icon-bar"></span>
		</button>
		<div class="navbar-collapse collapse">
			<div class="row">
				<div class="col-lg-1 col-md-0"></div>
				<div class="col-lg-5 col-md-8">
					<ul class="nav navbar-nav" id="mainTabBar">
						<li id="liMainTab"><a href="#" class="menulink" rel="auto-poputchik.html">Главная</a></li>
						<li id="liFound" class="custom-active"><a href="#" class="menulink" rel="ishu-poputku.html">Поиск попутки</a></li>								
						<li id="liVoditel" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Водителю <b class="caret"></b></a>
							<ul class="dropdown-menu">
								<li><a href="#" class="menulink" rel="podvezti-na-mashine.html">Зарегистрировать поездку</a></li>
								<li><a href="#" class="menulink" rel="carpool.html">Мои поездки</a></li>
							</ul>
						</li>
					</ul>
				</div>
				<div class="col-lg-5 col-md-4">
					<ul class="nav navbar-nav pull-right">
						<li id="liEnter" style="display:none;"><a href="#" class="menulink navbar-link" rel="loginpage.html"> <i class='glyphicon glyphicon-user'></i>&nbsp;&nbsp;Войти</a></li>
						<li id="liLogout"style="display:none;"><a href="#" class="menulink navbar-link" rel="auto-poputchik.html?logout=1" title="Выйти из системы">Выход <i class="glyphicon glyphicon-log-out"></i></a></li>
					</ul>
				</div>
				<div class="col-lg-1 col-md-0"></div>
			</div>
		</div>
	</nav>		
<!--------- Main body --------------->
	<div class="container">
		<div class="jumbotron">
		<h1 style="padding-bottom: 20px;"><strong>Ищу попутку, поиск попутного авто</strong></h1>
		<div class="panel panel-default otkudaKudaBack">
			<form id="foundRoutesForm">
				<fieldset>
					<div class="form-group col-md-4">
						<label for="foundComboFrom" class="control-label ">Откуда</label>
						<select class="form-control" id="foundComboFrom"
							name="foundComboFrom">
						</select>
					</div>
					<div class="form-group col-md-4">
						<label for="foundComboTo" class="control-label ">Куда</label>
						<select class="form-control" id="foundComboTo"
							name="foundComboTo">
						</select>
					</div>
					<div class="form-group col-md-4">
						<label for="foundDatepicker" class="control-label ">Дата</label>
						<input id="foundDatepicker" name="foundDatepicker" type="text"	class="date-picker form-control" placeholder="Клик для выбора">
						&nbsp;&nbsp;<span style="font-size: 15px; color: #6a7480;">
							<input type="checkbox" checked id="found3daysChk"> +/- 3 дня</input>
						</span>
					</div>
				</fieldset>
				<fieldset>
					<div class="form-group col-md-12">
						<button type="submit" id="lookFor"
							class="btn btn-success btn-large">Найти попутку &raquo;</button>
					</div>
				</fieldset>
			</form>
		</div>

		<div class="panel panel-default" id="searchResultPanel" style="display: none;">
				<div class="panel-heading">
					<h2 class="panel-title">Список найденных поездок</h2>
				</div>
				<div class="table-responsive" style="margin: 5px 0px;">
					<table class="table table-bordered table-striped table-hover table-condensed" id="foundTable">
						<thead>
							<tr>
								<!-- <th>Дата создания</th> -->
								<th>Из</th>
								<th>Через</th>
								<th>В</th>
								<th>Дата отъезда</th>
								<!-- <th>Эл.почта</th>
								<th>Тел.</th> -->
								<th>Кол-во мест</th>
								<th style="text-align:center">Цена за место</th>
								<th style="text-align:center">Узнать</th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
			<div  style="padding-bottom: 60px;">
				<a href="auto-poputchik.html" title="Перейти на главную страницу">&laquo; На главную страницу</a>
			</div>
		</div>
		
		<hr>
		<footer id="poiskpagefooter">
		</footer>
	</div>
	
	<div id="progressBarDiv" class="successToast" style="display: none;">
		<p>Пожалуйста, ожидайте</p>
		<div class="progress progress-striped active">
			<div class="progress-bar" role="progressbar" aria-valuenow="100"
				aria-valuemin="0" aria-valuemax="100" style="width: 100%">
				<span class="sr-only">100% Complete</span>
			</div>
		</div>
	</div>

	<!-- Le javascript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="assets/js/login.js"></script>
	<script src="assets/js/jquery-1.10.1.min.js"></script>
	<script>
  		$("div#poiskpageheader").load("html/header.html"); 
  		$("footer#poiskpagefooter").load("html/footer.html");
	</script> 
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/jquery-ui-1.10.3.custom.min.js"></script>
	<script src="assets/js/jquery.ui.datepicker-ru.js"></script>
	<script src="assets/js/jquery.validate.min.js"></script>
	<script src="assets/js/jquery.tooltipster.min.js"></script>
	<script src="assets/js/main.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			
			//cities list load
			initCombos('#foundComboFrom, #foundComboTo');
			
			connectCombos('#foundComboFrom', '#foundComboTo', '#foundDatepicker', '#found3daysChk');
			
			var params = getQueryParams(document.location.search);
			if (params.issubmit) {
				findRoutes($('#foundComboFrom').val(), $('#foundComboTo').val(), $('#foundDatepicker').val(), $('#found3daysChk').prop('checked'));
			}
			
			// validation
		    $('#foundRoutesForm input[type="text"], #foundRoutesForm select').tooltipster({
		        trigger: 'custom',
		        onlyOne: false,
		        position: 'bottom',
		        theme: '.tooltipster-custom-theme'
		    });
			
			jQuery.validator.addMethod("compareCities", function(value, element, params) {
				return value != $("#foundComboFrom").val();
			}, jQuery.validator.format("Пункт отправления и пункт прибытия должны быть различны"));
			
			$("#foundRoutesForm").validate({
				submitHandler : function() {
					findRoutes($('#foundComboFrom').val(), $('#foundComboTo').val(), $('#foundDatepicker').val(), $('#found3daysChk').prop('checked'));
				},
				showErrors : function(errorMap, errorList) {
					animateValidationErrors(this, errorList);
				},
				rules : {
					foundComboFrom : {
						required : true
					},
					foundComboTo : {
						required : true,
						compareCities : true
					},
					foundDatepicker : {
						//datepicker valid() run in defaults onSelect
						required : true
					}
				},
				messages : {
					foundComboFrom : {
						required : 'Выберите город'
					},
					foundComboTo : {
						required : 'Выберите город'
					},
					foundDatepicker : {
						required : 'Выберите дату'
					}
				}
			});			
		});
	</script>
</body>
</html>
